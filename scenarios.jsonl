{"name": "claude-jail-connection", "description": "WebSocket client can connect to Claude Jail server", "given": "Claude Jail server running on port 31337", "when": "Client opens WebSocket connection", "then": "Connection established successfully", "validates": "WebSocket server is listening and accepts connections"}
{"name": "claude-jail-query-protocol", "description": "Query messages follow correct protocol format", "given": "Connected WebSocket client", "when": "Client sends query message with channel_id, workspace, prompt", "then": "Server responds with message containing matching channel_id and valid type (text|tool_use|done|error)", "validates": "Protocol serialization/deserialization works correctly"}
{"name": "claude-jail-close-session", "description": "Session close requests are handled gracefully", "given": "Connected WebSocket client", "when": "Client sends close_session message for a channel", "then": "Server handles request without error", "validates": "Session lifecycle management works"}
{"name": "claude-jail-invalid-message", "description": "Invalid messages are handled gracefully", "given": "Connected WebSocket client", "when": "Client sends message with unknown type", "then": "Server returns error or closes connection gracefully", "validates": "Error handling for malformed requests"}
